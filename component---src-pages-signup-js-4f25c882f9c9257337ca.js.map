{"version":3,"sources":["webpack:///./src/utils/store.js","webpack:///./src/images/caption.png","webpack:///./src/pages/signup.js"],"names":["Store","email","password","this","userIsSaved","addUser","db","localStorage","MISSIVE_USERS","JSON","parse","push","stringify","removeUser","filter","e","checkUser","includes","logUser","some","module","exports","checkEmail","document","querySelector","validationMessage","classList","add","remove","confirmPassword","confirm","value","forEach","setCustomValidity","Signup","useState","error","setError","className","styles","src","caption","alt","method","onSubmit","preventDefault","form","FormData","target","get","navigate","replace","autoComplete","type","required","name","onChange","placeholder","to"],"mappings":"uJAAqBA,E,WACjB,WAAYC,EAAOC,GACfC,KAAKF,MAAQA,EACbE,KAAKF,MAAQA,EACbE,KAAKC,aAAc,EACnBD,KAAKE,QAAQJ,EAAOC,G,2BAGxBG,QAAA,SAAQJ,EAAOC,GACX,IAAII,EAAKC,aAAaC,eACtBF,EAAKA,EAAKG,KAAKC,MAAMJ,GAAM,IACxBK,KAAK,CAAEV,QAAOC,aACjBK,aAAaC,cAAgBC,KAAKG,UAAUN,GAC5CH,KAAKC,aAAc,G,EAGvBS,WAAA,SAAWZ,GACP,IAAIK,EAAKC,aAAaC,eACtBF,EAAKA,EAAKG,KAAKC,MAAMJ,GAAM,IACxBQ,QAAO,SAAAC,GAAC,OAAIA,EAAEd,QAAUA,KAC3BM,aAAaC,cAAgBC,KAAKG,UAAUN,I,EAGzCU,UAAP,SAAiBf,GACb,IAAMK,EAAKC,aAAaC,cACxB,QAAOF,GAAKA,EAAGW,SAAShB,I,EAGrBiB,QAAP,SAAejB,EAAOC,GAClB,IAAII,EAAKC,aAAaC,cAEtB,OADAF,EAAKA,EAAKG,KAAKC,MAAMJ,GAAM,IACjBa,MAAK,SAAAJ,GAAC,OAAIA,EAAEd,QAAUA,GAASc,EAAEb,WAAaA,M,2BC/BhEkB,EAAOC,QAAU,IAA0B,uD,kCCA3C,0IAMMC,EAAa,SAAAP,GACf,IAAMd,EAAQsB,SAASC,cAAc,uBACL,KAA5BvB,EAAMwB,kBACNxB,EAAMyB,UAAUC,IAAI,SAAU,iBAG9B1B,EAAMyB,UAAUE,OAAO,gBACvB3B,EAAMyB,UAAUC,IAAI,gBAItBE,EAAkB,SAAAd,GACpB,IAAMb,EAAWqB,SAASC,cAAc,0BAClCM,EAAUP,SAASC,cAAc,yBAEnCtB,EAAS6B,QAAUD,EAAQC,MAC3B,CAAC7B,EAAU4B,GAASE,SAAQ,SAAAjB,GACxBA,EAAEkB,kBAAF,yBACAlB,EAAEW,UAAUE,OAAO,gBACnBb,EAAEW,UAAUC,IAAI,SAAU,iBAK9B,CAACzB,EAAU4B,GAASE,SAAQ,SAAAjB,GACxBA,EAAEkB,kBAAkB,IACpBlB,EAAEW,UAAUE,OAAO,cACnBb,EAAEW,UAAUC,IAAI,oBAKb,SAASO,IAAU,IAAD,EACHC,mBAAS,MAA5BC,EADsB,KACfC,EADe,KAEvBC,EAAeC,IAAM,QAAZ,qBAmBf,OACI,6BAASD,UAAWA,GAChB,6BACI,yBAAKE,IAAKC,IAASC,IAAI,aAG3B,6BACI,6CAAkB,6BAAlB,aAEA,0BAAMC,OAAO,OAAOC,SA1BV,SAAA7B,GAClBA,EAAE8B,iBACF,IAAMC,EAAO,IAAIC,SAAShC,EAAEiC,QACtB/C,EAAQ6C,EAAKG,IAAI,SACjB/C,EAAW4C,EAAKG,IAAI,YACPjD,IAAMgB,UAAUf,GAG/BoC,EAAS,mCAIT,IAAIrC,IAAMC,EAAOC,GACjBgD,mBAAS,cAAe,CAAEC,SAAS,MAacC,aAAa,OACtD,2BAAIhB,GACJ,2BAAOiB,KAAK,QAAQC,UAAQ,EAACC,KAAK,QAAQC,SAAUlC,EAAYmC,YAAY,kBAC5E,2BAAOJ,KAAK,WAAWC,UAAQ,EAACC,KAAK,WAAWC,SAAU3B,EAAiB4B,YAAY,sBACvF,2BAAOJ,KAAK,WAAWC,UAAQ,EAACC,KAAK,UAAUC,SAAU3B,EAAiB4B,YAAY,qBACtF,2BAAOnB,UAAWC,IAAM,OAAYc,KAAK,SAAStB,MAAM,mBACxD,4DAAsC,kBAAC,OAAD,CAAM2B,GAAG,UAAT","file":"component---src-pages-signup-js-4f25c882f9c9257337ca.js","sourcesContent":["export default class Store {\r\n    constructor(email, password) {\r\n        this.email = email;\r\n        this.email = email;\r\n        this.userIsSaved = false;\r\n        this.addUser(email, password);\r\n    }\r\n\r\n    addUser(email, password) {\r\n        let db = localStorage.MISSIVE_USERS;\r\n        db = db ? JSON.parse(db) : [];\r\n        db.push({ email, password });\r\n        localStorage.MISSIVE_USERS = JSON.stringify(db);\r\n        this.userIsSaved = true;\r\n    }\r\n    \r\n    removeUser(email) {\r\n        let db = localStorage.MISSIVE_USERS;\r\n        db = db ? JSON.parse(db) : [];\r\n        db.filter(e => e.email !== email);\r\n        localStorage.MISSIVE_USERS = JSON.stringify(db);\r\n    }\r\n    \r\n    static checkUser(email) {\r\n        const db = localStorage.MISSIVE_USERS;\r\n        return db ? db.includes(email) : false;\r\n    }\r\n    \r\n    static logUser(email, password) {\r\n        let db = localStorage.MISSIVE_USERS;\r\n        db = db ? JSON.parse(db) : [];\r\n        return db.some(e => e.email === email && e.password === password);\r\n    }\r\n}","module.exports = __webpack_public_path__ + \"static/caption-edb139fe2d165ee583c28c3fd84392b7.png\";","import React, { useState } from 'react'\r\nimport { Link, navigate } from 'gatsby'\r\nimport Store from '../utils/store'\r\nimport styles from '../styles/form.module.css'\r\nimport caption from '../images/caption.png'\r\n\r\nconst checkEmail = e => {\r\n    const email = document.querySelector('input[type=\"email\"]');\r\n    if (email.validationMessage === '') {\r\n        email.classList.add('border', 'border-green');\r\n    }\r\n    else {\r\n        email.classList.remove('border-green');\r\n        email.classList.add('border-red');\r\n    }\r\n}\r\n\r\nconst confirmPassword = e => {\r\n    const password = document.querySelector('input[name=\"password\"]');\r\n    const confirm = document.querySelector('input[name=\"confirm\"]');\r\n\r\n    if (password.value !== confirm.value) {\r\n        [password, confirm].forEach(e => {\r\n            e.setCustomValidity(`Passwords don't match`);\r\n            e.classList.remove('border-green');\r\n            e.classList.add('border', 'border-red');\r\n        });\r\n    }\r\n\r\n    else {\r\n        [password, confirm].forEach(e => {\r\n            e.setCustomValidity('');\r\n            e.classList.remove('border-red');\r\n            e.classList.add('border-green');\r\n        });\r\n    }\r\n}\r\n\r\nexport default function Signup() {\r\n    const [error, setError] = useState(null);\r\n    const className = `${styles['section']} container mx-auto`;\r\n\r\n    const createAccount = e => {\r\n        e.preventDefault();\r\n        const form = new FormData(e.target);\r\n        const email = form.get('email');\r\n        const password = form.get('password');\r\n        const userExists = Store.checkUser(email);\r\n        \r\n        if (userExists) {\r\n            setError('This email has been connected.');\r\n        }\r\n        \r\n        else {\r\n            new Store(email, password);\r\n            navigate('/dashboard/', { replace: true });\r\n        }\r\n    }\r\n\r\n    return (\r\n        <section className={className}>\r\n            <div>\r\n                <img src={caption} alt=\"caption\" />\r\n            </div>\r\n\r\n            <div>\r\n                <h1>Let's get you <br /> started.</h1>\r\n\r\n                <form method=\"post\" onSubmit={createAccount} autoComplete=\"off\">\r\n                    <p>{error}</p>\r\n                    <input type=\"email\" required name=\"email\" onChange={checkEmail} placeholder=\"Email Address\" />\r\n                    <input type=\"password\" required name=\"password\" onChange={confirmPassword} placeholder=\"Create a Password\" />\r\n                    <input type=\"password\" required name=\"confirm\" onChange={confirmPassword} placeholder=\"Confirm Password\" />\r\n                    <input className={styles['create']} type=\"submit\" value=\"Create Account\"/>\r\n                    <footer>Already have an account?&nbsp;<Link to=\"/login\">Log in</Link></footer>\r\n                </form>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n"],"sourceRoot":""}